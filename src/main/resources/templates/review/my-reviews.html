<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}">
<head>
    <meta charset="UTF-8">
    <title>내 리뷰 | 북스캠프</title>
</head>
<body>

<section layout:fragment="hero" class="hero" style="display:none;"></section>

<div layout:fragment="content">
    <section class="checkout spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-10 offset-lg-1">

                    <div style="background:#fff; padding:40px; border:1px solid #ebebeb; border-radius:4px;">

                        <!-- 헤더 -->
                        <div style="margin-bottom:30px; border-bottom:2px solid #ebebeb; padding-bottom:20px;">
                            <h4 style="font-weight:700;">
                                <i class="fa fa-comments" style="margin-right:10px; color:#7fad39;"></i>
                                내가 작성한 리뷰
                            </h4>
                            <p style="color:#6f6f6f;">작성하신 리뷰 목록입니다.</p>
                        </div>

                        <!-- 빈 값 -->
                        <div th:if="${#lists.isEmpty(reviews)}" style="text-align:center; padding:40px 0; color:#6f6f6f;">
                            작성된 리뷰가 없습니다.
                        </div>

                        <!-- 리뷰 카드 -->
                        <div th:each="review : ${reviews}" style="border-bottom:1px solid #efefef; padding:20px 0;">
                            <div style="display:flex; gap:20px;">
                                <!-- 썸네일 -->
                                <div style="width:90px; height:120px; border-radius:4px; background:#f8f8f8; overflow:hidden;">
                                    <img th:src="${review.thumbnailUrl}" style="width:100%; height:100%; object-fit:cover;">
                                </div>

                                <!-- 본문 -->
                                <div style="flex:1;">
                                    <div style="display:flex; justify-content:space-between; align-items:center;">
                                        <h5 style="margin:0; font-weight:600;" th:text="${review.bookTitle}"></h5>
                                        <span style="font-size:12px; color:#999;"
                                              th:text="${#temporals.format(review.createdAt,'yyyy.MM.dd')}"></span>
                                    </div>

                                    <div style="color:#ffb400; margin:5px 0;" th:text="'★ ' + ${review.score} + ' / 5'"></div>

                                    <p style="font-size:14px; margin:10px 0;" th:text="${review.content}"></p>

                                    <!-- 이미지들 -->
                                    <div style="display:flex; gap:10px; flex-wrap:wrap;"
                                         th:if="${review.imageUrls != null and !review.imageUrls.isEmpty()}">
                                        <img th:each="img : ${review.imageUrls}"
                                             th:src="${img}"
                                             style="width:70px; height:70px; border-radius:4px; object-fit:cover; border:1px solid #ddd;">
                                    </div>

                                    <!-- 수정 버튼 -->
                                    <a th:href="@{'/mypage/reviews/' + ${review.reviewId}}"
                                       class="site-btn"
                                       style="margin-top:12px; padding:8px 16px;">
                                        수정하기
                                    </a>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </section>
</div>

</body>
</html>
