<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}">

<head>
    <meta charset="UTF-8">
    <title>포인트 내역 | 북스캠프</title>
</head>

<body>

<section layout:fragment="hero" class="hero" style="display: none;"></section>

<div layout:fragment="content">
    <section class="checkout spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-10 offset-lg-1">

                    <div style="background: #ffffff; padding: 40px; border: 1px solid #ebebeb; border-radius: 4px;">

                        <!-- 헤더 -->
                        <div style="text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #ebebeb;">
                            <h4 style="font-weight: 700; margin-bottom: 10px;">
                                <i class="fa fa-coins" style="margin-right: 10px; color: #7fad39;"></i>
                                포인트 내역
                            </h4>
                        </div>

                        <!-- 테이블 -->
                        <table class="table" style="width: 100%; font-size: 15px;">
                            <thead>
                            <tr style="background: #f8f8f8; border-bottom: 2px solid #ebebeb;">
                                <th>유형</th>
                                <th>포인트</th>
                                <th>주문 ID</th>
                                <th>비고</th>
                                <th>일시</th>
                            </tr>
                            </thead>

                            <tbody>

                            <tr th:if="${points.size()} == 0">
                                <td colspan="4" style="text-align: center; padding: 20px;">포인트 내역이 없습니다.</td>
                            </tr>

                            <tr th:each="p : ${points}">
                                <!-- 적립 / 사용 -->
                                <td th:text="${p.pointType == T(store.bookscamp.front.pointhistory.PointType).EARN ? '적립' : '사용'}"></td>

                                <!-- 금액: 적립 +값 / 사용 -절대값 -->
                                <td th:classappend="${p.pointAmount > 0 ? 'text-success' : 'text-danger'}"
                                    th:text="${p.pointAmount > 0
                                        ? '+' + p.pointAmount
                                        : '-' + T(java.lang.Math).abs(p.pointAmount)}">
                                </td>

                                <!-- 주문 ID -->
                                <td th:text="${p.orderId != null ? p.orderId : '-'}"></td>

                                <!-- 비고 -->
                                <td th:text="${p.description != null ? p.description : '-'}"></td>

                                <!-- 날짜 -->
                                <td th:text="${#temporals.format(p.createdAt, 'yyyy-MM-dd HH:mm:ss')}"></td>
                            </tr>

                            </tbody>
                        </table>

                        <!-- 페이지네이션 -->
                        <div style="text-align: center; margin-top: 20px;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination justify-content-center">

                                    <!-- 이전 버튼 -->
                                    <li class="page-item" th:classappend="${page.first} ? 'disabled'">
                                        <a class="page-link" th:href="@{/mypage/points(page=${page.number - 1})}">이전</a>
                                    </li>

                                    <!-- 페이지 번호 -->
                                    <li class="page-item"
                                        th:each="i : ${#numbers.sequence(0, page.totalPages - 1)}"
                                        th:classappend="${i == page.number} ? 'active'">
                                        <a class="page-link" th:text="${i + 1}"
                                           th:href="@{/mypage/points(page=${i})}"></a>
                                    </li>

                                    <!-- 다음 버튼 -->
                                    <li class="page-item" th:classappend="${page.last} ? 'disabled'">
                                        <a class="page-link" th:href="@{/mypage/points(page=${page.number + 1})}">다음</a>
                                    </li>
                                </ul>
                            </nav>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

</body>
</html>