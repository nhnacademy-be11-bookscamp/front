<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8" />
    <title th:text="${username} + ' 주소 수정'">주소 수정</title>
    <style>
        body { font-family: system-ui, sans-serif; margin: 24px; }
        form { max-width: 560px; display: grid; gap: 14px; }
        label { font-weight: 600; }
        input { width: 100%; padding: 10px; border:1px solid #e5e7eb; border-radius:8px; }
        .row { display:flex; gap:8px; align-items:center; }
        .btn { display:inline-block; padding:10px 14px; border:1px solid #e5e7eb; background:#fff; border-radius:8px; cursor:pointer; }
        .btn.primary { background:#111827; color:#fff; border-color:#111827; }
        .toolbar { display:flex; gap:8px; margin-top: 10px; }
    </style>
</head>
<body>
<h1 th:text="${username} + ' 주소 수정'">주소 수정</h1>

<form th:action="@{/members/{u}/address/{id}/edit(u=${username}, id=${id})}" method="post">
    <div>
        <label for="label">별칭</label>
        <input id="label" name="label" type="text" th:value="${form.label}" required />
    </div>

    <div>
        <label for="roadNameAddress">도로명 주소</label>
        <div class="row">
            <input id="roadNameAddress" name="roadNameAddress" type="text" th:value="${form.roadNameAddress}" readonly required />
            <button class="btn" type="button" onclick="openDaumPostcode()">주소 찾기</button>
        </div>
    </div>

    <div>
        <label for="zipCode">우편번호</label>
        <input id="zipCode" name="zipCode" type="text" th:value="${form.zipCode}" readonly required />
    </div>

    <div class="toolbar">
        <a th:href="@{/members/{u}/address(u=${username})}" class="btn">목록으로</a>
        <button class="btn primary" type="submit">수정 완료</button>
    </div>
</form>

<script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script>
    function openDaumPostcode() {
        new daum.Postcode({
            oncomplete: function(data) {
                document.getElementById('roadNameAddress').value = data.roadAddress || data.jibunAddress || '';
                document.getElementById('zipCode').value = data.zonecode || '';
            }
        }).open();
    }
</script>
</body>
</html>
