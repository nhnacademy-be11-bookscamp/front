<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>주소 목록</title>
    <style>
        body { font-family: system-ui, sans-serif; margin: 24px; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #e5e7eb; padding: 10px; text-align: left; }
        th { background-color: #f9fafb; }
        .toolbar { margin-top: 20px; }
        .btn { display:inline-block; padding:8px 12px; background:#111827; color:#fff;
            border:none; border-radius:8px; text-decoration:none; cursor:pointer; }
        .msg { background:#f3f4f6; padding:10px; margin-bottom:12px; border-radius:8px; }
    </style>
</head>
<body>
<h1 th:text="${username} + '님의 주소 목록'">주소 목록</h1>

<!-- Flash 메시지 -->
<div th:if="${message}" class="msg" th:text="${message}"></div>

<table>
    <thead>
    <tr>
        <th>별칭</th>
        <th>도로명 주소</th>
        <th>우편번호</th>
        <th>관리</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="addr : ${addresses}">
        <td th:text="${addr.label}"></td>
        <td th:text="${addr.roadNameAddress}"></td>
        <td th:text="${addr.zipCode}"></td>
        <td>
            <!-- 수정 -->
            <a th:href="@{/members/{u}/address/{id}/edit(u=${username}, id=${addr.id},
                        label=${addr.label}, roadNameAddress=${addr.roadNameAddress}, zipCode=${addr.zipCode})}"
               class="btn">수정</a>

            <!-- 삭제 -->
            <form th:action="@{/members/{u}/address/{id}/delete(u=${username}, id=${addr.id})}"
                  method="post" style="display:inline;">
                <button type="submit" class="btn" style="background:#dc2626;">삭제</button>
            </form>
        </td>
    </tr>
    <tr th:if="${#lists.isEmpty(addresses)}">
        <td colspan="4" style="text-align:center; color:#6b7280;">등록된 주소가 없습니다.</td>
    </tr>
    </tbody>
</table>

<div class="toolbar">
    <a th:href="@{/members/{u}/address/new(u=${username})}" class="btn">새 주소 등록</a>
</div>
</body>
</html>
