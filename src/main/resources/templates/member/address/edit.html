<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}">
<head>
    <meta charset="UTF-8" />
    <title>주소 수정 | 북스캠프</title>
</head>
<body>

<section layout:fragment="hero" class="hero" style="display:none;"></section>

<div layout:fragment="content">
    <section class="checkout spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 offset-lg-2">

                    <!-- 마이페이지 카드 -->
                    <div style="background:#ffffff; padding: 32px; border:1px solid #ebebeb; border-radius:4px;">

                        <!-- 제목 영역 -->
                        <div style="display:flex; align-items:center; gap:8px; margin-bottom:24px; border-bottom:2px solid #ebebeb; padding-bottom:16px;">
                            <i class="fa fa-map-marker" style="color:#7fad39;"></i>
                            <h5 style="margin:0; font-weight:700; color:#333;">주소 수정</h5>
                        </div>

                        <!-- 수정 폼 -->
                        <form th:action="@{|/mypage/${username}/address/${id}/edit|}"
                              method="post" th:object="${form}">

                            <!-- 별칭 -->
                            <div style="margin-bottom:18px;">
                                <label style="font-weight:700; color:#333; margin-bottom:6px; display:block;">별칭</label>
                                <input type="text" th:field="*{label}"
                                       style="width:100%; padding:12px; border:1px solid #d1d5db; border-radius:6px;"
                                       required />
                            </div>

                            <!-- 우편번호 -->
                            <div style="margin-bottom:18px;">
                                <label style="font-weight:700; color:#333; margin-bottom:6px; display:block;">우편번호</label>
                                <div style="display:flex; gap:10px;">
                                    <input type="text" th:field="*{zipCode}" readonly required
                                           style="flex:1; padding:12px; border:1px solid #d1d5db; border-radius:6px; background:#f8f8f8;" />
                                    <button type="button" class="site-btn"
                                            onclick="execDaumPostcode()"
                                            style="padding:10px 14px;">
                                        주소 찾기
                                    </button>
                                </div>
                            </div>

                            <!-- 도로명 주소 -->
                            <div style="margin-bottom:18px;">
                                <label style="font-weight:700; color:#333; margin-bottom:6px; display:block;">도로명 주소</label>
                                <input type="text" th:field="*{roadNameAddress}" readonly required
                                       style="width:100%; padding:12px; border:1px solid #d1d5db; border-radius:6px; background:#f8f8f8;" />
                            </div>

                            <!-- 상세 주소 -->
                            <div style="margin-bottom:18px;">
                                <label style="font-weight:700; color:#333; margin-bottom:6px; display:block;">상세 주소</label>
                                <input type="text" th:field="*{detailAddress}" required
                                       style="width:100%; padding:12px; border:1px solid #d1d5db; border-radius:6px;" />
                            </div>

                            <!-- 기본 주소 -->
                            <div style="margin-bottom:24px;">
                                <label style="font-weight:700; color:#333; margin-bottom:6px; display:block;">기본 주소</label>
                                <label style="display:flex; align-items:center; gap:8px;">
                                    <input type="checkbox" th:field="*{isDefault}" />
                                    <span style="color:#333;">이 주소를 기본 배송지로 설정</span>
                                </label>
                            </div>

                            <!-- 액션 버튼들 -->
                            <div style="display:flex; gap:10px; flex-wrap:wrap;">
                                <button type="submit" class="site-btn" style="padding:10px 20px;">
                                    저장
                                </button>

                                <a th:href="@{|/mypage/${username}/address|}"
                                   class="site-btn"
                                   style="background:#6f6f6f; padding:10px 20px;">
                                    목록으로
                                </a>

                                <!-- 삭제 -->
                                <form th:action="@{|/mypage/${username}/address/${id}/delete|}"
                                      method="post" onsubmit="return confirm('정말 삭제하시겠어요?');">
                                    <button type="submit"
                                            class="site-btn"
                                            style="background:#dc3545; padding:10px 20px;">
                                        삭제
                                    </button>
                                </form>
                            </div>

                        </form>

                    </div>
                    <!-- /마이페이지 카드 -->

                </div>
            </div>
        </div>
    </section>
</div>

<!-- 다음 주소 찾기 -->
<th:block layout:fragment="extra-js">
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script>
        function execDaumPostcode() {
            new daum.Postcode({
                oncomplete: function(data) {
                    document.getElementById('roadNameAddress').value = data.roadAddress || data.address;
                    document.getElementById('zipCode').value = data.zonecode;
                    document.getElementById('detailAddress').focus();
                }
            }).open();
        }
    </script>
</th:block>

</body>
</html>
